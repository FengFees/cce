# 容器网络概述<a name="cce_01_0281"></a>

-   [选择网络模型](#section15922428693)

容器网络为集群内Pod分配IP地址并提供网络服务，华为自研高性能商业版容器网络插件，支持容器隧道网络、VPC网络、云原生网络2.0三种网络模型。

关于容器隧道网络、VPC网络、云原生网络2.0的详细介绍，请参见：

-   [容器隧道网络（Overlay）](容器隧道网络（Overlay）.md)
-   [VPC网络](VPC网络.md)
-   [云原生网络2.0](云原生网络2-0.md)

## 选择网络模型<a name="section15922428693"></a>

[表1](#zh-cn_topic_0146398798_table715802210336)主要介绍三种网络模型，您可根据业务实际需求，选择对应的网络模型。

>![](public_sys-resources/icon-caution.gif) **注意：** 
>集群创建成功后，网络模型不可更改，请谨慎选择。

**表 1**  网络模型对比

<a name="zh-cn_topic_0146398798_table715802210336"></a>
<table><thead align="left"><tr id="zh-cn_topic_0146398798_row015822213316"><th class="cellrowborder" valign="top" width="15.951595159515952%" id="mcps1.2.5.1.1"><p id="zh-cn_topic_0146398798_p1715813225335"><a name="zh-cn_topic_0146398798_p1715813225335"></a><a name="zh-cn_topic_0146398798_p1715813225335"></a><strong id="zh-cn_topic_0146398798_b18239648143919"><a name="zh-cn_topic_0146398798_b18239648143919"></a><a name="zh-cn_topic_0146398798_b18239648143919"></a>对比维度</strong></p>
</th>
<th class="cellrowborder" valign="top" width="26.082608260826078%" id="mcps1.2.5.1.2"><p id="zh-cn_topic_0146398798_p1015919220339"><a name="zh-cn_topic_0146398798_p1015919220339"></a><a name="zh-cn_topic_0146398798_p1015919220339"></a><strong id="zh-cn_topic_0146398798_b129018364392"><a name="zh-cn_topic_0146398798_b129018364392"></a><a name="zh-cn_topic_0146398798_b129018364392"></a>容器隧道网络</strong></p>
</th>
<th class="cellrowborder" valign="top" width="29.022902290229023%" id="mcps1.2.5.1.3"><p id="zh-cn_topic_0146398798_p5158192253312"><a name="zh-cn_topic_0146398798_p5158192253312"></a><a name="zh-cn_topic_0146398798_p5158192253312"></a><strong id="zh-cn_topic_0146398798_b12902173623916"><a name="zh-cn_topic_0146398798_b12902173623916"></a><a name="zh-cn_topic_0146398798_b12902173623916"></a>VPC网络</strong></p>
</th>
<th class="cellrowborder" valign="top" width="28.942894289428946%" id="mcps1.2.5.1.4"><p id="zh-cn_topic_0146398798_p13620427132519"><a name="zh-cn_topic_0146398798_p13620427132519"></a><a name="zh-cn_topic_0146398798_p13620427132519"></a><strong id="b118445931714"><a name="b118445931714"></a><a name="b118445931714"></a>云原生网络2.0</strong></p>
</th>
</tr>
</thead>
<tbody><tr id="zh-cn_topic_0146398798_row3364165414382"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p7365105418387"><a name="zh-cn_topic_0146398798_p7365105418387"></a><a name="zh-cn_topic_0146398798_p7365105418387"></a>数据面依赖</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p205912419393"><a name="zh-cn_topic_0146398798_p205912419393"></a><a name="zh-cn_topic_0146398798_p205912419393"></a>OVS</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p1759117483919"><a name="zh-cn_topic_0146398798_p1759117483919"></a><a name="zh-cn_topic_0146398798_p1759117483919"></a>IPVlan，VPC路由</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p962082712256"><a name="zh-cn_topic_0146398798_p962082712256"></a><a name="zh-cn_topic_0146398798_p962082712256"></a>VPC弹性网卡，VPC辅助弹性网卡</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row9184022123919"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p939214336391"><a name="zh-cn_topic_0146398798_p939214336391"></a><a name="zh-cn_topic_0146398798_p939214336391"></a>适用集群</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p183921533143919"><a name="zh-cn_topic_0146398798_p183921533143919"></a><a name="zh-cn_topic_0146398798_p183921533143919"></a>混合集群</p>
<p id="zh-cn_topic_0146398798_p7392123313914"><a name="zh-cn_topic_0146398798_p7392123313914"></a><a name="zh-cn_topic_0146398798_p7392123313914"></a>虚机集群</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p139214338397"><a name="zh-cn_topic_0146398798_p139214338397"></a><a name="zh-cn_topic_0146398798_p139214338397"></a>混合集群</p>
<p id="zh-cn_topic_0146398798_p53924334399"><a name="zh-cn_topic_0146398798_p53924334399"></a><a name="zh-cn_topic_0146398798_p53924334399"></a>虚机集群</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p7914115121510"><a name="zh-cn_topic_0146398798_p7914115121510"></a><a name="zh-cn_topic_0146398798_p7914115121510"></a>CCE Turbo集群</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row18748936104718"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p104711451154714"><a name="zh-cn_topic_0146398798_p104711451154714"></a><a name="zh-cn_topic_0146398798_p104711451154714"></a>是否支持网络策略</p>
<p id="zh-cn_topic_0146398798_p6471751134717"><a name="zh-cn_topic_0146398798_p6471751134717"></a><a name="zh-cn_topic_0146398798_p6471751134717"></a>（networkpolicy）</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p20471351124715"><a name="zh-cn_topic_0146398798_p20471351124715"></a><a name="zh-cn_topic_0146398798_p20471351124715"></a>是</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p1047145111471"><a name="zh-cn_topic_0146398798_p1047145111471"></a><a name="zh-cn_topic_0146398798_p1047145111471"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p3620162742516"><a name="zh-cn_topic_0146398798_p3620162742516"></a><a name="zh-cn_topic_0146398798_p3620162742516"></a>可通过VPC网络的安全组实现，详情请参见<a href="https://support.huaweicloud.com/usermanual-vpc/zh-cn_topic_0073379079.html" target="_blank" rel="noopener noreferrer">安全组简介</a> 。</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row26521844204715"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p134711351184716"><a name="zh-cn_topic_0146398798_p134711351184716"></a><a name="zh-cn_topic_0146398798_p134711351184716"></a>是否支持ENI</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p74715518471"><a name="zh-cn_topic_0146398798_p74715518471"></a><a name="zh-cn_topic_0146398798_p74715518471"></a>否</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p20471115114714"><a name="zh-cn_topic_0146398798_p20471115114714"></a><a name="zh-cn_topic_0146398798_p20471115114714"></a>是，容器网络与VPC网络深度整合，Pod内直接使用VPC弹性网卡。</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p762022716254"><a name="zh-cn_topic_0146398798_p762022716254"></a><a name="zh-cn_topic_0146398798_p762022716254"></a>是，Pod内直接使用VPC弹性网卡或者VPC辅助弹性网卡。</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row96181615010"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p1726882465017"><a name="zh-cn_topic_0146398798_p1726882465017"></a><a name="zh-cn_topic_0146398798_p1726882465017"></a>IP地址管理</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p82691024125018"><a name="zh-cn_topic_0146398798_p82691024125018"></a><a name="zh-cn_topic_0146398798_p82691024125018"></a>IP地址可迁移</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><a name="zh-cn_topic_0146398798_ul1259224495118"></a><a name="zh-cn_topic_0146398798_ul1259224495118"></a><ul id="zh-cn_topic_0146398798_ul1259224495118"><li>每个节点分配一个小子网。</li><li>在VPC Router上添加静态路由，下一跳为节点IP。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p106204277258"><a name="zh-cn_topic_0146398798_p106204277258"></a><a name="zh-cn_topic_0146398798_p106204277258"></a>可自定义子网，通过VPC子网分配Pod的IP地址。</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row1661816105018"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p10269102415509"><a name="zh-cn_topic_0146398798_p10269102415509"></a><a name="zh-cn_topic_0146398798_p10269102415509"></a>网络性能</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p526982419507"><a name="zh-cn_topic_0146398798_p526982419507"></a><a name="zh-cn_topic_0146398798_p526982419507"></a>基于vxlan隧道封装，有性能损耗。</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><a name="zh-cn_topic_0146398798_ul4143192791019"></a><a name="zh-cn_topic_0146398798_ul4143192791019"></a><ul id="zh-cn_topic_0146398798_ul4143192791019"><li>无隧道封装，性能好，媲美主机网络。</li><li>跨节点通过VPC Router转发。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><a name="zh-cn_topic_0146398798_ul1043583331011"></a><a name="zh-cn_topic_0146398798_ul1043583331011"></a><ul id="zh-cn_topic_0146398798_ul1043583331011"><li>完全使用底层VPC网络能力。</li><li><span>ELB直通容器，高性能</span>。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row262191685013"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p142691524115014"><a name="zh-cn_topic_0146398798_p142691524115014"></a><a name="zh-cn_topic_0146398798_p142691524115014"></a>组网规模</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p72692024105016"><a name="zh-cn_topic_0146398798_p72692024105016"></a><a name="zh-cn_topic_0146398798_p72692024105016"></a>最大可支持2000节点</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p184026307513"><a name="zh-cn_topic_0146398798_p184026307513"></a><a name="zh-cn_topic_0146398798_p184026307513"></a>受限VPC路由表能力，具体请参见<a href="https://support.huaweicloud.com/productdesc-vpc/overview_0003.html" target="_blank" rel="noopener noreferrer">使用限制</a>。</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><a name="zh-cn_topic_0146398798_ul16128163821213"></a><a name="zh-cn_topic_0146398798_ul16128163821213"></a><ul id="zh-cn_topic_0146398798_ul16128163821213"><li>集群规模：无限制。</li><li>单节点Pod数量受限于BMS实例的ENI网卡数量或ECS实例的网卡数量，由于插件的Pod实例也会占用网卡，因此网卡个数上限需大于您所装的插件Pod个数，否则将导致工作负载无法调度。</li></ul>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row265119104479"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p1826920247509"><a name="zh-cn_topic_0146398798_p1826920247509"></a><a name="zh-cn_topic_0146398798_p1826920247509"></a>外部依赖</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><p id="zh-cn_topic_0146398798_p32691424195014"><a name="zh-cn_topic_0146398798_p32691424195014"></a><a name="zh-cn_topic_0146398798_p32691424195014"></a>无</p>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><p id="zh-cn_topic_0146398798_p204029302517"><a name="zh-cn_topic_0146398798_p204029302517"></a><a name="zh-cn_topic_0146398798_p204029302517"></a>依赖VPC Router静态路由表能力。</p>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><p id="zh-cn_topic_0146398798_p205352041131019"><a name="zh-cn_topic_0146398798_p205352041131019"></a><a name="zh-cn_topic_0146398798_p205352041131019"></a>依赖VPC的弹性网卡或辅助弹性网卡的能力</p>
</td>
</tr>
<tr id="zh-cn_topic_0146398798_row14400144693816"><td class="cellrowborder" valign="top" width="15.951595159515952%" headers="mcps1.2.5.1.1 "><p id="zh-cn_topic_0146398798_p1926972465013"><a name="zh-cn_topic_0146398798_p1926972465013"></a><a name="zh-cn_topic_0146398798_p1926972465013"></a>适用场景</p>
</td>
<td class="cellrowborder" valign="top" width="26.082608260826078%" headers="mcps1.2.5.1.2 "><a name="zh-cn_topic_0146398798_ul619513457509"></a><a name="zh-cn_topic_0146398798_ul619513457509"></a><ul id="zh-cn_topic_0146398798_ul619513457509"><li>一般容器业务场景。</li><li>对网络时延、带宽要求不是特别高的场景。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="29.022902290229023%" headers="mcps1.2.5.1.3 "><a name="zh-cn_topic_0146398798_ul1659212532511"></a><a name="zh-cn_topic_0146398798_ul1659212532511"></a><ul id="zh-cn_topic_0146398798_ul1659212532511"><li>对网络时延、带宽要求高。</li><li>容器与虚机IP互通，使用了微服务注册框架的，如Dubbo、CSE等。</li></ul>
</td>
<td class="cellrowborder" valign="top" width="28.942894289428946%" headers="mcps1.2.5.1.4 "><a name="zh-cn_topic_0146398798_ul10867019880"></a><a name="zh-cn_topic_0146398798_ul10867019880"></a><ul id="zh-cn_topic_0146398798_ul10867019880"><li>对网络时延、带宽要求高，高性能场景。</li><li>容器与虚机IP互通，使用了微服务注册框架的，如Dubbo、CSE等。</li></ul>
</td>
</tr>
</tbody>
</table>

>![](public_sys-resources/icon-notice.gif) **须知：** 
>1.  VPC网络集群实际支持规模受限于VPC的路由表路由条目配额，创建前请提前评估集群规模。
>2.  云原生网络2.0集群实际支持规模受限于网络平面选择的子网网段大小，创建前请提前评估集群规模。
>3.  VPC网络模型默认支持容器与同一VPC的虚拟机直接互访，与其他VPC的主机在配置对等连接策略后可以支持直接互访。此外，云专线/VPN等混合组网场景在合理规划后可以支持对端直接与容器互访。

