# 集群升级<a name="cce_01_0120"></a>

集群可快速升级到Kubernetes最新版本或者bugfix版本，并支持部分新特性的使用。

若您的集群当前已是最新的，集群升级按钮为不可用状态。

本章节以升级虚拟机集群为例，其他集群操作参考虚拟机集群。

## 集群版本升级说明<a name="section984051415549"></a>

集群版本升级说明如下表格所示。

**表 1**  集群版本升级说明

<a name="table7445114645410"></a>
<table><thead align="left"><tr id="row244694645413"><th class="cellrowborder" valign="top" width="35%" id="mcps1.2.3.1.1"><p id="p174461846165411"><a name="p174461846165411"></a><a name="p174461846165411"></a>Kubernetes版本-CCE补丁版本</p>
</th>
<th class="cellrowborder" valign="top" width="65%" id="mcps1.2.3.1.2"><p id="p1446154614545"><a name="p1446154614545"></a><a name="p1446154614545"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row114461746125410"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p18446164685419"><a name="p18446164685419"></a><a name="p18446164685419"></a>v1.7.3-r0</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p1644604616545"><a name="p1644604616545"></a><a name="p1644604616545"></a>基线版本，支持ELB负载均衡，容器存储支持XEN虚拟机挂载。</p>
</td>
</tr>
<tr id="row244634610548"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p74462046105410"><a name="p74462046105410"></a><a name="p74462046105410"></a>v1.7.3-r1</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p144634685413"><a name="p144634685413"></a><a name="p144634685413"></a>kube-dns支持外部域名解析。</p>
</td>
</tr>
<tr id="row2044604619544"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p4446174614543"><a name="p4446174614543"></a><a name="p4446174614543"></a>v1.7.3-r2</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p10447346115413"><a name="p10447346115413"></a><a name="p10447346115413"></a>支持文件存储。</p>
</td>
</tr>
<tr id="row44477467549"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p7447174613540"><a name="p7447174613540"></a><a name="p7447174613540"></a>v1.7.3-r3</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p544744610549"><a name="p544744610549"></a><a name="p544744610549"></a>容器存储支持KVM虚拟机挂载。</p>
</td>
</tr>
<tr id="row12447184612543"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p14447144620547"><a name="p14447144620547"></a><a name="p14447144620547"></a>v1.7.3-r4</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p19447124665413"><a name="p19447124665413"></a><a name="p19447124665413"></a>集群性能优化。</p>
</td>
</tr>
<tr id="row7718776556"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p27209718551"><a name="p27209718551"></a><a name="p27209718551"></a>v1.7.3-r5</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p77203755515"><a name="p77203755515"></a><a name="p77203755515"></a>支持HA高可靠集群。</p>
</td>
</tr>
<tr id="row685121145914"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p1685291115911"><a name="p1685291115911"></a><a name="p1685291115911"></a>v1.7.3-r6</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p178531211135911"><a name="p178531211135911"></a><a name="p178531211135911"></a>集群存储对接原生EVS接口。</p>
</td>
</tr>
<tr id="row1328201465917"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p143287143597"><a name="p143287143597"></a><a name="p143287143597"></a>v1.7.3-r7</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p1075917211280"><a name="p1075917211280"></a><a name="p1075917211280"></a>容器隧道网络集群支持纳管SUSE 12sp2节点。</p>
<p id="p1475383418010"><a name="p1475383418010"></a><a name="p1475383418010"></a>docker支持direct-lvm模式。</p>
</td>
</tr>
<tr id="row7597191665914"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p259761617594"><a name="p259761617594"></a><a name="p259761617594"></a>v1.7.3-r8</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p5597161610596"><a name="p5597161610596"></a><a name="p5597161610596"></a>集群支持节点弹性扩容。</p>
</td>
</tr>
<tr id="row15124153951815"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p15127339141816"><a name="p15127339141816"></a><a name="p15127339141816"></a>v1.7.3-r9</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p1012711396181"><a name="p1012711396181"></a><a name="p1012711396181"></a>集群支持节点多可用区。</p>
<p id="p10776105001216"><a name="p10776105001216"></a><a name="p10776105001216"></a>容器存储支持对象存储服务。</p>
</td>
</tr>
<tr id="row42151109118"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p1121540615"><a name="p1121540615"></a><a name="p1121540615"></a>v1.7.3-r10</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p1221519013111"><a name="p1221519013111"></a><a name="p1221519013111"></a>容器网络升级。</p>
</td>
</tr>
<tr id="row192158018111"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p172152005113"><a name="p172152005113"></a><a name="p172152005113"></a>v1.7.3-r11</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p1021519016116"><a name="p1021519016116"></a><a name="p1021519016116"></a>升级集群ELB服务控制器。</p>
</td>
</tr>
<tr id="row22151501112"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p16215140517"><a name="p16215140517"></a><a name="p16215140517"></a>v1.7.3-r12</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p12310153212207"><a name="p12310153212207"></a><a name="p12310153212207"></a>新增DNAT服务。</p>
<p id="p192156018111"><a name="p192156018111"></a><a name="p192156018111"></a>网络隔离策略开放。</p>
</td>
</tr>
<tr id="row178217494010"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p1182120494013"><a name="p1182120494013"></a><a name="p1182120494013"></a>v1.7.3-r13</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p818554717204"><a name="p818554717204"></a><a name="p818554717204"></a>支持DNS级联。</p>
<p id="p182117491603"><a name="p182117491603"></a><a name="p182117491603"></a>支持插件化管理。</p>
</td>
</tr>
<tr id="row19887142710119"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p8887102710115"><a name="p8887102710115"></a><a name="p8887102710115"></a>v1.9.2-r1</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p914115432119"><a name="p914115432119"></a><a name="p914115432119"></a>升级Kubernetes版本至v1.9.2。</p>
</td>
</tr>
<tr id="row388714274111"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p168877271917"><a name="p168877271917"></a><a name="p168877271917"></a>v1.9.2-r2</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p10579101692118"><a name="p10579101692118"></a><a name="p10579101692118"></a>集群服务转发模式支持ipvs。</p>
<p id="p65791316112119"><a name="p65791316112119"></a><a name="p65791316112119"></a>升级集群ELB服务控制器。</p>
</td>
</tr>
<tr id="row68879271917"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p1488772716117"><a name="p1488772716117"></a><a name="p1488772716117"></a>v1.9.2-r3</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p78131642162115"><a name="p78131642162115"></a><a name="p78131642162115"></a>新增DNAT服务。</p>
<p id="p168871727716"><a name="p168871727716"></a><a name="p168871727716"></a>网络隔离策略开放。</p>
</td>
</tr>
<tr id="row13696412411"><td class="cellrowborder" valign="top" width="35%" headers="mcps1.2.3.1.1 "><p id="p193696411843"><a name="p193696411843"></a><a name="p193696411843"></a>v1.9.7-r0</p>
</td>
<td class="cellrowborder" valign="top" width="65%" headers="mcps1.2.3.1.2 "><p id="p2333105432110"><a name="p2333105432110"></a><a name="p2333105432110"></a>支持DNS级联。</p>
<p id="p662941192213"><a name="p662941192213"></a><a name="p662941192213"></a>支持插件化管理。</p>
<p id="p193699411413"><a name="p193699411413"></a><a name="p193699411413"></a>升级Kubernetes版本至v1.9.7。</p>
</td>
</tr>
</tbody>
</table>

**表 2**  1.7.3版本升级到1.9.7版本升级说明

<a name="table826812711586"></a>
<table><thead align="left"><tr id="row182714712580"><th class="cellrowborder" valign="top" width="15.02%" id="mcps1.2.4.1.1"><p id="p9349145865810"><a name="p9349145865810"></a><a name="p9349145865810"></a>升级前版本</p>
</th>
<th class="cellrowborder" valign="top" width="24.98%" id="mcps1.2.4.1.2"><p id="p1727217165814"><a name="p1727217165814"></a><a name="p1727217165814"></a>目标版本</p>
</th>
<th class="cellrowborder" valign="top" width="60%" id="mcps1.2.4.1.3"><p id="p0273577581"><a name="p0273577581"></a><a name="p0273577581"></a>说明</p>
</th>
</tr>
</thead>
<tbody><tr id="row527419785819"><td class="cellrowborder" valign="top" width="15.02%" headers="mcps1.2.4.1.1 "><p id="p634915589583"><a name="p634915589583"></a><a name="p634915589583"></a>v1.7.3</p>
</td>
<td class="cellrowborder" valign="top" width="24.98%" headers="mcps1.2.4.1.2 "><p id="p11275478583"><a name="p11275478583"></a><a name="p11275478583"></a>v1.9.7</p>
</td>
<td class="cellrowborder" valign="top" width="60%" headers="mcps1.2.4.1.3 "><a name="ul1237552125913"></a><a name="ul1237552125913"></a><ul id="ul1237552125913"><li>社区1.7.3与1.9.7版本之间的CHANGELOG<p id="p15562044195910"><a name="p15562044195910"></a><a name="p15562044195910"></a>1.8到1.9的变化：<a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.9.md" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.9.md</a></p>
<p id="p282812387595"><a name="p282812387595"></a><a name="p282812387595"></a>1.7到1.8的变化：<a href="https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.8.md" target="_blank" rel="noopener noreferrer">https://github.com/kubernetes/kubernetes/blob/master/CHANGELOG-1.8.md</a></p>
</li><li>集群支持使用GPU3</li><li>集群节点弹性扩缩容</li></ul>
</td>
</tr>
</tbody>
</table>

## 操作步骤<a name="section18273159190"></a>

1.  登录CCE控制台，单击左侧导航栏的“资源管理 \> 集群管理”。
2.  单击待升级集群后的“更多 \> 集群升级“。

    根据系统提示进行升级操作。


