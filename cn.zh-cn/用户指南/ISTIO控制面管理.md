# ISTIO控制面管理<a name="cce_01_0199"></a>

ISTIO管理提供了ISTIO控制面组件、数据面sidecar的健康及性能监控能力，支持运行资源的扩缩容管理，以及不同ISTIO版本间的升级管理。

ISTIO控制面组件负责向数据面组件注入sidecar，管理数据面sidecar行为，下发策略配置，搜集监控数据等。其中，sidecar（边车）是指运行在业务pod中，与业务容器协同工作，负责业务pod的路由转发，监控数据采集，流量规则配置等功能。

## 监控使能了服务网格的集群<a name="section14496161019566"></a>

1.  在CCE左侧导航栏中选择“应用管理 \> Istio管理”。
2.  查看所有使能了ISTIO服务网格的集群情况。

    在该页面，您可以查看每个集群的istio版本，运行状态，控制面组件数量和数据面Sidecar数量，以及控制面组件pilot，mixer，gateway的CPU与内存占用量。

3.  单击集群名称，查看控制面所有组件和Sidecar的业务pod信息。
    -   “控制面组件”页签：展示Istio控制面的所有组件，以及每个组件的运行状态，CUP、内存占用率，实例数量，命名空间等信息。
    -   “Sidecar管理”页签：展示所有注入了sidecar的业务pod信息，以及每个pod的名称，CPU、内存占用率，sidecar版本，创建时间，sidecar升级操作入口等信息。


## 升级ISTIO控制面<a name="section16367531115016"></a>

执行升级操作需具备以下两个条件：

-   ISTIO控制面运行版本需小于最新版本
-   旧版本ISTIO控制面运行正常

1.  在CCE左侧导航栏中选择“应用管理 \> Istio管理”。
2.  在ISTIO管理集群列表页面，单击待升级集群后的“升级”。
3.  查看升级版本，确定是否自动升级sidecar。
    -   是：会在ISTIO控制面升级完成后，通过重启业务pod的方式进行sidecar重新注入，过程中业务pod将会重启，可能导致业务中断。
    -   否：仅会升级ISTIO控制面组件，sidecar升级需跳转到Sidecar管理页签自行升级sidecar，该方式会导致控制面组件与数据面sidecar版本不一致，可能产生兼容性问题，建议尽快同步升级sdiecar版本。

4.  确认无误后，单击“升级”。

运行节点页

帮助用户查看自己创建的独享节点：

用户在当前集群中创建了独享节点，就可以在运行节点页中观测到节点的相关信息，包括节点名称、状态、可用区、私有IP地址、规格、可用CPU、可用内存。

可以选择节点进行扩容。

步骤1  在CCE左侧导航栏中选择“应用管理 \> Istio管理”。

步骤2 点击相应集群名称进入Istio管理详情。

步骤3  点击运行节点页签。

步骤4  点击“扩容”链接跳转到扩容页面。

Addon管理

可以对插件进行安装与卸载。插件包括grafana、prometheus、kiali、tracing四个插件。这些插件都可以帮助用户进行流量治理与监测。

插件安装

步骤1  点击Addon管理页签

步骤2   选择要安装的插件，点击【安装】按钮，跳转到安装页面。

步骤3  在安装页面中给插件选择要绑定的elb（如果elb监听器配额不够则不显示），以及输入要分配给插件安装的cpu和内存大小，输入框分为申请值和限制值。这四个值都是必填且不能超过节点剩余额度大小。

步骤4  点击【安装】按钮，将会跳转到插件管理页面。插件卡片的左上角将会显示插件的安装和运行状态

插件卸载

步骤1 点击插件卡片右上角的删除，弹出确认对话框。

步骤2 点击【确定】按钮，将会把插件从已安装中移除。

